{"version":3,"sources":["../src/ErrorWrapper.js","../src/Validator.js","../src/PhoneNumberValidator.js","../src/EmailValidator.js","../src/vlib.js"],"names":[],"mappings":"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","file":"vlib.js","sourcesContent":["\n// Credit to: http://stackoverflow.com/a/32749533/2487701\n\nclass ExtendableError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = this.constructor.name;\n    this.message = message;\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = (new Error(message)).stack;\n    }\n  }\n}\n\nclass MyError extends ExtendableError {\n  constructor(m) {\n    super(m);\n  }\n}\n","\nclass ValidatorResult {}\n\n\nclass Validator {\n\n  constructor(input) {\n\n    if(typeof input === 'undefined') throw ReferenceError('Validator')\n\n  }\n\n}\n","class PhoneNumberValidator extends Validator {\n\n  constructor(input) {\n\n    super(input)\n\n    if(!input) throw new ReferenceError('input is not defined')\n\n    if(!input || typeof input !== 'string') throw new Error('Input cannot be')\n\n  }\n\n}\n","class EmailValidator extends Validator {\n\n  USERNAME_SYMBOLS = 'abcdefghijklmnopqtuvwxyzABCDEFGHIJKLMNOPQTUVWXYZ0123456789!$&*-=\\\\^`|~#%‘+/?_{}/'\n  USERNAME_SPECIAL_SYMBOLS = '\"(),:;<>@[\\\\]'\n\n  STATUS_USERNAME = 0\n  STATUS_USERNAME_STRING = 1\n  STATUS_USERNAME_SUFFIX = 2\n  STATUS_USERNAME_SUFFIX_STRING = 3\n  STATUS_DOMAIN = 4\n  STATUS_DONE = 5\n\n  status = null\n\n  message = ''\n\n  input = ''\n  valid = false\n\n  username = ''\n  username_suffix = ''\n  domain = ''\n\n  error(message) {\n\n    this.valid = false\n\n    this.username = ''\n    this.username_suffix = ''\n    this.domain = ''\n\n    this.message = message\n\n    return this\n  }\n\n  constructor(input) {\n    super(input)\n\n    // Writting input as class property\n    this.input = input\n\n    // Trim leading spaces\n    this.input = this.input.replace(/(^\\s*|\\s*$)/, '')\n\n    // Initial status\n    this.status = this.STATUS_USERNAME\n\n    for(let i = 0; i < this.input.length; ++i) {\n\n\n\n      if(this.status === this.STATUS_USERNAME || this.status == this.STATUS_USERNAME_SUFFIX) {\n\n        if(this.USERNAME_SYMBOLS.indexOf(this.input[i]) !== -1) {\n\n          if(this.input[i] === '+')\n            this.status = this.STATUS_USERNAME_SUFFIX\n\n          else\n            this[this.status === this.STATUS_USERNAME ? 'username' : 'username_suffix'] += this.input[i]\n\n\n        } else if(this.input[i] === '@') {\n\n          if(i === 0)\n            return this.error('@ cannot be the first symbol of email address')\n\n          else\n            this.status = this.STATUS_DOMAIN\n\n\n        } else if(this.USERNAME_SPECIAL_SYMBOLS.indexOf(this.input[i]) !== -1) {\n\n          if(this.input[i] === '.') {\n\n            // Check if dot is first\n            if(i === 0)\n              return this.error('Dot cannot be first username character')\n\n            // Check if dot is last\n            if(this.input[i + 1] === '@')\n              return this.error('Dot cannot be last username character')\n\n            // Double dot check\n            if(this.input[i - 1] === '.')\n              return this.error('Dot cannot be next to another dot')\n\n          } else if(this.input[i] === '\"') {\n\n            this[this.status === this.STATUS_USERNAME ? 'username': 'username_suffix'] += '\"'\n\n            this.status = this.STATUS_USERNAME_STRING\n\n          } else {\n\n            // TODO: add more special character restrictions\n\n          }\n\n\n        }\n\n\n\n      } else if(this.status === this.STATUS_USERNAME_STRING || this.status === this.STATUS_USERNAME_SUFFIX_STRING) {\n\n        this[this.status === this.STATUS_USERNAME_STRING ? 'username' : 'username_suffix'] += this.input[i]\n\n        if(this.input[i] === '\"')\n          if(this.input[i - 1] !== '\\\\')\n            this.status = (this.status === this.STATUS_USERNAME_STRING ? this.STATUS_USERNAME : this.STATUS_USERNAME_SUFFIX)\n\n\n\n      } else if(this.status === this.STATUS_DOMAIN) {\n\n        if(this.input[i] === '@')\n          return this.error('Domain cannot contain @ symbol')\n\n        if(this.input[i] === '.') {\n\n          // Check if dot is first\n          if(i === 0)\n            return this.error('Dot cannot be first username character')\n\n          // Check if dot is last\n          if(this.input[i + 1] === '@')\n            return this.error('Dot cannot be last username character')\n\n          // Double dot check\n          if(this.input[i - 1] === '.')\n            return this.error('Dot cannot be next to another dot')\n\n        } \n\n        this.domain += this.input[i]\n\n        // TODO: Domain part\n\n      }\n\n\n\n    }\n\n    if(this.status === this.STATUS_DOMAIN)\n      this.valid = true\n    else\n      this.valid = false\n\n    return this\n\n  }\n\n}\n","class vlib {\n\n  constructor() {}\n\n  email = (email) => new EmailValidator(email)\n\n  phoneNumber = (phoneNumber) => new PhoneNumberValidator(phoneNumber)\n\n\n\n}\n\nvar v = new vlib()\n\nvar emails = {\n  valid: [\n    'ondrejpagebarta@gmail.com',\n    'ondrejpageb\"boo\"arta+asdnfio@gmail.com',\n    'user@[IPv6:2001:db8::1]',\n    '\"very.unusual.@.unusual.com\"@example.com',\n    '\"very.(),:;<>[]\\\".VERY.\\\"very@\\ \\\"very\\\".unusual\"@strange.example.com',\n    'example@s.solutions',\n    'x@example.com',\n    'very.common@example.com',\n    '\" \"@example.org'\n  ],\n  invalid: [\n    'this\\ still\\\"not\\allowed@example.com',\n    'A@b@c@example.com',\n    'john..doe@example.com',\n    'john.doe@example..com',\n    'a\"b(c)d,e:f;gi[j\\k]l@example.com',\n    'user@[IPv6:2001:db8::1',\n    'user@[IPv6:2001'\n  ]\n}\n\nconsole.log('')\nconsole.log('Sould be valid')\nfor(var i = 0; i < emails.valid.length; ++i)\n  console.log(`email \"${ emails.valid[i] }\" => ${ v.email(emails.valid[i]).valid ? 'valid' : 'invalid' }`, v.email(emails.valid[i]))\n\nconsole.log('')\nconsole.log('Should be invalid')\nfor(var i = 0; i < emails.invalid.length; ++i)\n  console.log(`email \"${ emails.invalid[i] }\" => ${ v.email(emails.invalid[i]).valid ? 'valid' : 'invalid' }`, v.email(emails.invalid[i]))\n\nconsole.log('')\nconsole.log(Validator.constructor)\n"]}